<div style="min-height:100vh; background: linear-gradient(135deg, #f8fafc 0%, #f0f4f8 100%); padding: 32px 24px;">
  <style>
    :host {
      --primary: #2563eb;
      --primary-dark: #1e40af;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-600: #4b5563;
      --gray-900: #111827;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .dashboard-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 40px;
      padding: 0 8px;
    }

    .dashboard-title {
      margin: 0;
      font-size: 32px;
      font-weight: 700;
      color: var(--gray-900);
      letter-spacing: -0.5px;
    }

    .dashboard-subtitle {
      font-size: 14px;
      color: var(--gray-600);
      margin-top: 6px;
      font-weight: 500;
    }

    /* CUSTOMERS GRID */
    .customers-grid {
      display: flex;
      gap: 24px;
      margin-bottom: 60px;
      overflow-x: auto;
      overflow-y: hidden;
      padding-bottom: 10px;
      scroll-behavior: smooth;
    }


    .customer-card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      border: 1px solid var(--gray-200);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      min-width: 320px; /* fixed width */
      width: 320px;
      flex: 0 0 auto;
      display: flex;
      flex-direction: column;
      justify-content: space-between; /* ‚≠ê important */
    }


      .customer-card:hover {
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
        border-color: var(--primary);
        transform: translateY(-4px);
      }

    .customer-header {
      margin-bottom: 18px;
    }

    .customer-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--gray-900);
      margin: 0;
    }

    .customer-email {
      font-size: 13px;
      color: var(--gray-600);
      margin-top: 4px;
      word-break: break-all;
    }

    .customer-stats {
      display: grid;
      gap: 14px;
      margin-bottom: 20px;
      flex-grow: 1;
      padding: 18px;
      background: var(--gray-50);
      border-radius: 8px;
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
    }

    .stat-label {
      font-weight: 600;
      color: var(--gray-600);
    }

    .stat-value {
      font-weight: 700;
      color: var(--gray-900);
    }

    .stat-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

      .stat-badge.active {
        background: rgba(16, 185, 129, 0.1);
        color: var(--success);
      }

      .stat-badge.inactive {
        background: rgba(229, 231, 235, 1);
        color: var(--gray-600);
      }

    .card-actions {
      display: flex;
      gap: 10px;
      margin-top: 16px;
    }

    .btn {
      padding: 10px 14px;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      flex: 1;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

      .btn-primary:hover {
        background: var(--primary-dark);
        box-shadow: 0 8px 16px rgba(37, 99, 235, 0.3);
      }

    .btn-danger {
      background: rgba(239, 68, 68, 0.1);
      color: var(--danger);
      border: 1px solid var(--danger);
    }

      .btn-danger:hover {
        background: var(--danger);
        color: white;
      }

    .empty-state {
      grid-column: 1 / -1;
      text-align: center;
      padding: 60px 24px;
      color: var(--gray-600);
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    /* FORM SECTIONS */
    .form-section {
      background: white;
      border-radius: 12px;
      padding: 32px;
      border: 1px solid var(--gray-200);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
      margin-bottom: 40px;
    }

    .form-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--gray-900);
      margin: 0 0 24px 0;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--gray-100);
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-label {
      font-weight: 600;
      color: var(--gray-900);
      margin-bottom: 8px;
      font-size: 14px;
    }

    .form-input,
    .form-select {
      padding: 12px 14px;
      border: 1px solid var(--gray-200);
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
      transition: all 0.3s ease;
    }

      .form-input:focus,
      .form-select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      }

    .form-actions {
      display: flex;
      gap: 12px;
      margin-top: 28px;
    }

    .btn-submit {
      padding: 12px 28px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

      .btn-submit:hover {
        background: var(--primary-dark);
        box-shadow: 0 8px 16px rgba(37, 99, 235, 0.3);
      }

    .btn-reset {
      padding: 12px 28px;
      background: transparent;
      color: var(--gray-600);
      border: 1px solid var(--gray-200);
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

      .btn-reset:hover {
        background: var(--gray-50);
        border-color: var(--gray-600);
      }

    /* MANAGE CUSTOMERS SECTION */
    .manage-section {
      background: white;
      border-radius: 12px;
      padding: 32px;
      border: 1px solid var(--gray-200);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    }

    .manage-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--gray-900);
      margin: 0 0 24px 0;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--gray-100);
    }

    .manage-grid {
      display: grid;
      gap: 16px;
    }

    .manage-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: var(--gray-50);
      border-radius: 8px;
      border: 1px solid var(--gray-200);
      transition: all 0.3s ease;
    }

      .manage-item:hover {
        background: white;
        border-color: var(--primary);
      }

    .manage-info {
      flex-grow: 1;
    }

    .manage-name {
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 4px;
    }

    .manage-email {
      font-size: 13px;
      color: var(--gray-600);
    }

    .manage-actions {
      display: flex;
      gap: 8px;
    }

    .btn-edit {
      padding: 8px 14px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

      .btn-edit:hover {
        background: var(--primary-dark);
      }

    .btn-delete-small {
      padding: 8px 14px;
      background: rgba(239, 68, 68, 0.1);
      color: var(--danger);
      border: 1px solid var(--danger);
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

      .btn-delete-small:hover {
        background: var(--danger);
        color: white;
      }

    /* MODAL */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      animation: fadeIn 0.3s ease;
    }

      .modal-overlay.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 32px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 20px 25px rgba(0, 0, 0, 0.15);
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--gray-900);
      margin: 0;
    }

    .modal-body {
      margin-bottom: 24px;
    }

    .modal-footer {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
    }

    .btn-modal-cancel {
      padding: 10px 18px;
      background: transparent;
      color: var(--gray-600);
      border: 1px solid var(--gray-200);
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

      .btn-modal-cancel:hover {
        background: var(--gray-50);
      }

    .btn-modal-submit {
      padding: 10px 18px;
      background: var(--danger);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

      .btn-modal-submit:hover {
        background: #dc2626;
      }

    .alert {
      padding: 14px 16px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      font-weight: 500;
    }

    .alert-success {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
      border: 1px solid var(--success);
    }

    .alert-error {
      background: rgba(239, 68, 68, 0.1);
      color: var(--danger);
      border: 1px solid var(--danger);
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 8px;
    }

      .checkbox-group input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
      }
  </style>

  <div class="container">
    <!-- HEADER -->

    <div class="dashboard-header">
      <div>
        <h2 class="dashboard-title">Customers Dashboard</h2>
        <p class="dashboard-subtitle">Manage and monitor all customer accounts</p>
      </div>
    </div>

    <div class="customers-grid">
      <div *ngIf="customers.length === 0" class="empty-state">
        <div class="empty-state-icon">üë•</div>
        <p>No customers found. Create one to get started.</p>
      </div>

      <div *ngFor="let c of customers" class="customer-card">
        <div class="customer-header">
          <h3 class="customer-name">{{ c.name }}</h3>
          <p class="customer-email">{{ c.email }}</p>
        </div>

        <div class="customer-stats">
          <div class="stat-row">
            <span class="stat-label">Status</span>
            <span class="stat-badge" [ngClass]="c.isActive ? 'active' : 'inactive'">
              {{ c.isActive ? 'Active' : 'Inactive' }}
            </span>
          </div>

          <div class="stat-row">
            <span class="stat-label">Total Orders</span>
            <span class="stat-value">{{ c.totalOrders }}</span>
          </div>

          <div class="stat-row">
            <span class="stat-label">Latest Order</span>
            <span class="stat-value">
              {{ c.latestOrderTime ? (c.latestOrderTime | date:'short') : '‚Äî' }}
            </span>
          </div>
        </div>

        <button class="view-orders-button" (click)="openOrders(c.id)">
          View Orders ‚Üí
        </button>
      </div>
    </div>



    <!-- CREATE CUSTOMER FORM -->
    <div class="form-section">
      <h2 class="form-title">‚ûï Create New Customer</h2>

      <!-- Alert Message -->
      <div *ngIf="createMsg" class="alert" [class.alert-success]="createMsgType === 'success'" [class.alert-error]="createMsgType === 'error'">
        {{ createMsg }}
      </div>

      <form [formGroup]="createForm" (ngSubmit)="onCreateSubmit()">
        <div class="form-group">
          <label>Customer Name</label>
          <input type="text"
                 formControlName="name"
                 placeholder="John Doe"
                 class="form-input">
          <span *ngIf="createForm.get('name')?.invalid && createForm.get('name')?.touched" class="error-text">
            Name is required (min 2 chars)
          </span>
        </div>

        <div class="form-group">
          <label>Email Address</label>
          <input type="email"
                 formControlName="email"
                 placeholder="john@example.com"
                 class="form-input">
          <span *ngIf="createForm.get('email')?.invalid && createForm.get('email')?.touched" class="error-text">
            Valid email is required
          </span>
        </div>

        <div class="form-group">
          <label>Status</label>
          <select formControlName="isActive" class="form-input">
            <option [value]="true">Active</option>
            <option [value]="false">Inactive</option>
          </select>
        </div>

        <div class="form-actions">
          <button type="submit" [disabled]="createLoading" class="btn btn-primary">
            {{ createLoading ? 'Creating...' : 'Create Customer' }}
          </button>
          <button type="button" (click)="onCreateReset()" class="btn btn-secondary">
            Clear
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- UPDATE CUSTOMER FORM -->
  <!-- UPDATE CUSTOMER FORM -->
  <div class="form-section">
    <h2 class="form-title">‚úèÔ∏è Update Customer</h2>

    <!-- Alert Message -->
    <div *ngIf="updateMsg" class="alert" [class.alert-success]="updateMsgType === 'success'" [class.alert-error]="updateMsgType === 'error'">
      {{ updateMsg }}
    </div>

    <form [formGroup]="updateForm" (ngSubmit)="onUpdateSubmit()">
      <div class="form-grid">
        <div class="form-group">
          <label class="form-label">Select Customer to Edit</label>
          <select class="form-select" formControlName="customerId" (change)="onCustomerSelect()" required>
            <option value="">-- Choose a customer --</option>
            <option *ngFor="let customer of customers" [value]="customer.id">
              {{ customer.name }} ({{ customer.email }})
            </option>
          </select>
        </div>
      </div>

      <div *ngIf="updateFieldsVisible" id="updateFields">
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Customer Name</label>
            <input type="text" class="form-input" formControlName="name" placeholder="John Doe">
            <span *ngIf="updateForm.get('name')?.invalid && updateForm.get('name')?.touched" class="error-text">
              Name is required (min 2 chars)
            </span>
          </div>

          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input type="email" class="form-input" formControlName="email" placeholder="john@example.com">
            <span *ngIf="updateForm.get('email')?.invalid && updateForm.get('email')?.touched" class="error-text">
              Valid email is required
            </span>
          </div>

          <div class="form-group">
            <label class="form-label">Status</label>
            <select class="form-select" formControlName="isActive">
              <option [value]="true">Active</option>
              <option [value]="false">Inactive</option>
            </select>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" [disabled]="updateLoading" class="btn btn-primary">
            {{ updateLoading ? 'Updating...' : 'Update Customer' }}
          </button>
          <button type="button" (click)="onUpdateReset()" class="btn btn-Ssecondary">
            Cancel
          </button>
        </div>
      </div>
    </form>
  </div>
  <!-- MANAGE CUSTOMERS - QUICK ACTIONS -->
  <div class="manage-section">
    <h2 class="manage-title">üõ†Ô∏è Quick Actions</h2>

    <div *ngIf="customers.length === 0" style="color: var(--gray-600); text-align: center; padding: 40px 0;">
      <p>No customers to manage. Create one first!</p>
    </div>

    <div *ngIf="customers.length > 0" class="manage-grid">
      <div *ngFor="let customer of customers" class="manage-item">
        <div class="manage-info">
          <div class="manage-name">{{ customer.name }}</div>
          <div class="manage-email">{{ customer.email }}</div>
        </div>
        <div class="manage-actions">
          <button class="btn-delete-small" (click)="openDeleteModal(customer)">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- DELETE CONFIRMATION MODAL -->
  <div class="modal-overlay" [class.active]="showDeleteModal">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Delete Customer</h4>
      </div>
      <div class="modal-body">
        <p style="color: var(--gray-600); margin: 0;">
          Are you sure you want to delete <strong>{{ customerToDelete?.email }}</strong>? This action cannot be undone.
        </p>
      </div>
      <div class="modal-footer">
        <button class="btn-modal-cancel" (click)="closeDeleteModal()">Cancel</button>
        <button class="btn-modal-submit" [disabled]="deleteLoading" (click)="confirmDelete()">
          {{ deleteLoading ? 'Deleting...' : 'Delete Customer' }}
        </button>
      </div>
    </div>
  </div>


